<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>P2P Chat</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <h1>WebRTC P2P Chat</h1>
    </header>

    <!-- Chat Log -->
    <div id="chatLog"></div>

    <!-- Message Composer -->
    <div id="chatBox">
        <input id="chatInput" type="text" placeholder="Type a message..." />
        <button id="sendButton">Send</button>
    </div>

    <script src="https://cdn.socket.io/4.5.1/socket.io.min.js"></script>
    <script>
        const socket = io("https://common-verdant-boa.glitch.me/game");

        const chatLog = document.getElementById("chatLog");
        const chatInput = document.getElementById("chatInput");
        const sendButton = document.getElementById("sendButton");

        // Handle message sending
        sendButton.onclick = () => {
            const message = chatInput.value.trim();
            if (message) {
                socket.emit("message", message);
                appendMessage(message, "you");
                chatInput.value = "";
                chatInput.focus(); // Keep keyboard open
            }
        };

        // Append a message to the chat log
        function appendMessage(message, sender) {
            const messageDiv = document.createElement("div");
            messageDiv.className = `message ${sender}`;
            messageDiv.textContent = message;
            chatLog.appendChild(messageDiv);
            chatLog.scrollTop = chatLog.scrollHeight; // Auto-scroll to the latest message
        }

        // Listen for incoming messages
        socket.on("message", (message) => {
            appendMessage(message, "peer");
        });
    </script>
</body>
</html>

